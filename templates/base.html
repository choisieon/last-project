{% load static %}
{% load taggit_templatetags2_tags %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}Ï≤≠ÏÑ§Î™®{% endblock %}</title>
  {% block extra_head %}{% endblock %}
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  {{ form.media }}
  <style>
    @font-face {
      font-family: 'MyCustomFont';
      src: url("{% static 'fonts/ÌîΩÏÖÄ.woff2' %}") format('woff2');
      font-weight: 400;
      font-style: normal;
    }
    body {
      font-family: 'MyCustomFont', sans-serif;
      margin: 0;
      padding: 0;
      background: url("{% static 'images/Frame 13.png' %}") no-repeat center center fixed;
      background-size: cover;
      background-color: #cde4c7;
    }
    .wrapper {
      max-width: 800px;
      margin: 0 auto;
      padding: 30px 20px;
    }
    .top-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 16px;
      margin-bottom: 20px;
    }
    .menu-left, .menu-right {
      display: flex;
      gap: 12px;

      align-items: center;

    }
    .menu-box {
      background-color: rgba(250, 235, 180, 0.9);
      background-image: url("{% static 'images/pixel-paper.png' %}");
      background-size: 4px 4px;
      background-repeat: repeat;
      border: 2.5px solid #5a4a2f;
      box-shadow: 3px 3px 0 #b9a782;
      padding: 6px 12px;
      font-weight: bold;
      color: #3c2e1e;
      font-size: 14px;
      text-decoration: none;
    }
    .menu-box.active {
      color: #007aff;
      font-weight: bold;
    }
    .write-btn {
      background-color: #007aff;

    color: white;
    padding: 6px 12px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    font-size: 14px;
    border: 2px solid #5a4a2f;
    box-shadow: 3px 3px 0 #b9a782;
    }
    .write-btn:hover {
      background: #005bb5;
      color: #fff700;

    }
    .login-info {
      background-color: rgba(250, 235, 180, 0.9);
      background-image: url("{% static 'images/pixel-paper.png' %}");
      background-size: 4px 4px;
      background-repeat: repeat;
      padding: 6px 12px;
      border: 2.5px solid #5a4a2f;
      box-shadow: 3px 3px 0 #b9a782;
      font-size: 14px;
      color: #3c2e1e;
      font-weight: bold;
      display: flex;
      align-items: center;
    }
    .category-bar {
      margin-top: 20px;
      margin-bottom: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .category-bar button {
      background-color: rgba(250, 235, 180, 0.9);
      background-image: url("{% static 'images/pixel-paper.png' %}");
      background-size: 4px 4px;
      background-repeat: repeat;
      border: 2px solid #5a4a2f;
      box-shadow: 2px 2px 0 #b9a782;
      font-family: 'MyCustomFont';
      font-size: 13px;
      font-weight: bold;
      padding: 6px 10px;
      cursor: pointer;
      color: #4a3b28;
    }
    .category-bar .active {
      background-color: #007aff;
      color: white;
    }
    .search-bar {
      display: flex;
      width: 100%;
      max-width: 600px;
      height: 42px;
      background-color: #f0e6cb;
      border: 3px solid #333;
      background-image: url("{% static 'images/pixel-paper.png' %}");
      background-size: 4px 4px;
      box-shadow: 4px 4px 0 #888;
      border-radius: 0;
      overflow: hidden;
      margin: 0 auto 30px;
    }
    .search-bar input {
      flex: 1;
      padding: 0 12px;
      border: none;
      font-family: 'MyCustomFont', sans-serif;
      font-size: 14px;
      background: transparent;
      color: #000;
    }
    .search-bar input::placeholder {
      color: #000;
      font-weight: bold;
    }
    .search-bar button {
      width: 44px;
      background: #444 url("{% static 'images/ÎèãÎ≥¥Í∏∞.png' %}") no-repeat center center;
      background-size: 42px 42px;
      border: none;
      cursor: pointer;
    }
    .post-list {
      gap: 14px;
    }
    .post-item {
      background: rgba(250, 235, 180, 0.9);
      background-image: url("{% static 'images/pixel-paper.png' %}");
      background-size: 4px 4px;
      background-repeat: repeat;
      border: 2px solid #5a4a2f;
      box-shadow: 2px 2px 0 #b9a782;
      padding: 12px;
    }
    .post-item h4 {
      margin-bottom: 4px;
      font-size: 14px;
      color: #333;
    }
    .post-item p {
      font-size: 12.5px;
      color: #444;
    }

    .form-outer {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      padding-top: 40px;
    }
    .form-control {
      background: #fffbe9;
      border: 2px solid #1976d2;
      border-radius: 7px;
      padding: 13px 14px;
      font-size: 1.09rem;
      color: #222831;
      box-shadow: 2px 2px 0 #b9a78233;
      margin-bottom: 13px;
      width: 100%;
    }
    .form-container {
      width: 480px;
      padding: 36px 32px 28px 32px;
      background: rgba(255,255,255,0.95);
      border: 2.5px solid #5a4a2f;
      box-shadow: 4px 4px 0 #b9a782;
      border-radius: 14px;
    }
    .form-control:focus {
      border: 2px solid #007aff;
      background: #fff;
      outline: none;
      box-shadow: 0 0 8px #007aff33;
    }

    .form-group {
      margin-bottom: 22px;
    }
    .form-group label {
      color: #222;
      display: block;
      font-weight: bold;
      font-size: 1.12rem;
      margin-bottom: 7px;
      text-shadow: 1px 1px 3px #fff, 0 0 2px #0008;
    }
    .post-images img {
      max-width: 350px;
      max-height: 350px;
      width: 100%;
      height: auto;
      border-radius: 8px;
      margin-bottom: 8px;
      display: block;
    }
    .post-preview img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      display: block;
      border-radius: 8px;
      background: none;
    }
    .post-item-text {
      flex: 1;
    }
    .unread {
       font-weight: bold; 
    }
    .post-item-row {
      display: flex;
      align-items: flex-start;
      margin-bottom: 20px;
    }
    .post-preview {
      width: 110px;
      min-width: 80px;
      max-width: 140px;
      height: 110px;
      overflow: hidden;
      background: none;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-left: 16px;   /* ÏôºÏ™Ω Ïó¨Î∞± (Ïò§Î•∏Ï™ΩÏóê Î∂ôÏù¥ÎãàÍπå) */
      border: none;
      box-shadow: none;
      padding: 0;
    }


    </style>
    {% block extra_style %}{% endblock %}
</head>
<body>
  <div class="wrapper">
    <!-- ÏÉÅÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
    <div class="top-nav">
      <div class="menu-left">

        <a href="{% url 'community:index' %}" class="menu-box home-link">
          <i class="fas fa-home"></i>
        </a>
        <a href="{% url 'board:post_list' %}" class="menu-box {% block nav_community_active %}{% endblock %}">Ïª§ÎÆ§ÎãàÌã∞</a>
        <a href="{% url 'mentor:mentor_home' %}" class="menu-box {% block nav_mentor_active %}{% endblock %}">Î©òÌÜ†Î©òÌã∞</a>
        <a href="#" class="menu-box {% block nav_mypage_active %}{% endblock %}">ÎßàÏù¥ÌéòÏù¥ÏßÄ</a>
        <a href="{% url 'youth_policy:basic_page' %}" class="menu-box {% block nav_policy_active %}{% endblock %}">Ï≤≠ÎÖÑÏ†ïÏ±Ö</a>
      </div>
      <div class="menu-right">
        <a href="{% url 'board:post_new' %}" class="write-btn">Í∏ÄÏì∞Í∏∞</a>
        <div class="notification-area" style="position:relative;">
          <span id="noti-bell" style="cursor:pointer; font-size:20px; position:relative;">
            üîî
            
              {% if unread_count %}
                <span id="noti-badge" style="position:absolute; top:-6px; right:-8px; background:#e33; color:#fff; border-radius:50%; font-size:11px; padding:2px 6px;">{{ unread_count }}</span>
              {% endif %}
              
          </span>
          <!-- ÎìúÎ°≠Îã§Ïö¥ ÏïåÎ¶º Î™©Î°ù (Í∏∞Î≥∏ Ïà®ÍπÄ) -->
          <ul id="noti-list" style="display:none; position:absolute; right:0; top:28px; z-index:100; background:#fffbe9; border:1.5px solid #5a4a2f; min-width:220px; max-height:300px; overflow-y:auto; box-shadow:2px 2px 0 #b9a782; padding:10px; list-style:none;">
            {% for noti in request.user.notifications.all|slice:":10" %}
              <li class="{% if not noti.is_read %}unread{% endif %}"style="margin-bottom:8px;">
                <a href="{% url 'board:notifications_read' noti.id %}" style="text-decoration:none; color:#333;">
                  {{ noti.message }}
                </a>
                <span class="date" style="font-size:12px; color:#888;">{{ noti.created_at|date:"Y-m-d H:i" }}</span>
              </li>
            {% empty %}
              <li>ÏÉà ÏïåÎ¶ºÏù¥ ÏóÜÏäµÎãàÎã§.</li>
            {% endfor %}
            <li style="text-align:center; margin-top:8px;">
              <a href="{% url 'board:notifications_all' %}" style="font-size:13px; color:#007aff;">ÏïåÎ¶ºÌï®ÏúºÎ°ú Ïù¥Îèô</a>
            </li>
          </ul>
        </div>
        <div class="login-info">ÌôçÍ∏∏ÎèôÎãò ÌôòÏòÅÌï©ÎãàÎã§</div>
      </div>

    </div>
    {% block category_bar %}{% endblock %}
    
    {% block search_bar %}{% endblock %}
    {% block content %}{% endblock %}
  </div>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const bell = document.getElementById('noti-bell');
    const list = document.getElementById('noti-list');
    if (bell && list) {
      bell.addEventListener('click', function(e) {
        e.stopPropagation();
        list.style.display = (list.style.display === 'none' || list.style.display === '') ? 'block' : 'none';
      });
      document.body.addEventListener('click', function() {
        list.style.display = 'none';
      });
    }
  });
  </script>
  {% block extra_script %}{% endblock %}
</body>
</html>