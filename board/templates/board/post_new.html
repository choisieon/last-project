{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="form-outer">
  <div class="form-container">
    <h2>글쓰기</h2>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
        {{ form.title.label_tag }}
        {{ form.title }}
        {% for error in form.title.errors %}
          <div class="error">{{ error }}</div>
        {% endfor %}
      </div>
      <div class="form-group">
        {{ form.category.label_tag }}
        {{ form.category }}
        {% for error in form.category.errors %}
          <div class="error">{{ error }}</div>
        {% endfor %}
      </div>
      <div class="form-group">
        {{ form.content.label_tag }}
        {{ form.content }}
        {% for error in form.content.errors %}
          <div class="error">{{ error }}</div>
        {% endfor %}
      </div>
      <div class="form-group">
        {{ form.image.label_tag }}
        {{ form.image }}
        {% for error in form.image.errors %}
          <div class="error">{{ error }}</div>
        {% endfor %}
      </div>
      <button type="submit" class="write-btn">등록</button>
    </form>
  </div>
</div>

{% if category == 'review' or form.category.value == 'review' %}
  <script src="{% static 'tinymce/tinymce.min.js' %}"></script>
  <script>
    tinymce.init({
      selector: 'textarea[name="content"]',
      menubar: false,
      toolbar: 'formatselect | bold italic underline | alignleft aligncenter alignright | bullist numlist | link image',
      plugins: 'lists link image',
      language: 'ko_KR'
    });
  </script>
{% endif %}
{% endblock %}

{% block extra_style %}
<style>
.form-outer {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  padding-top: 40px;
}

.form-container {
  width: 480px;
  background: rgba(255,255,255,0.95);
  border: 2.5px solid #5a4a2f;
  box-shadow: 4px 4px 0 #b9a782;
  border-radius: 14px;
  padding: 36px 32px 28px 32px;
}

.form-group {
  margin-bottom: 22px;
}

.form-group label {
  display: block;
  color: #222;
  font-weight: bold;
  font-size: 1.12rem;
  margin-bottom: 7px;
  text-shadow: 1px 1px 3px #fff, 0 0 2px #0008;
}

.form-control {
  width: 100%;
  border: 2px solid #1976d2;
  border-radius: 7px;
  padding: 13px 14px;
  font-size: 1.09rem;
  background: #fffbe9;
  color: #222831;
  box-shadow: 2px 2px 0 #b9a78233;
  margin-bottom: 13px;
}

.form-control:focus {
  border: 2px solid #007aff;
  background: #fff;
  outline: none;
  box-shadow: 0 0 8px #007aff33;
}

.write-btn {
  width: 130px;
  font-size: 1.17rem;
  font-weight: bold;
  background: #007aff;
  color: #fff;
  border: 2px solid #5a4a2f;
  border-radius: 7px;
  box-shadow: 2px 2px 0 #b9a782;
  padding: 13px 0;
  cursor: pointer;
  letter-spacing: 1px;
  margin-top: 18px;
  margin-bottom: 8px;
  transition: background 0.2s, color 0.2s;
}

.write-btn:hover {
  background: #005bb5;
  color: #fff700;
}

.error {
  color: #d32f2f;
  font-size: 0.97rem;
  margin-top: 2px;
  margin-bottom: 4px;
}
</style>
{% endblock %}
